[{"name": "app.py", "content": "import copy\nimport json\nimport locale\nfrom datetime import datetime\nfrom pathlib import Path\nfrom urllib.parse import parse_qs, urlparse\n\nfrom functions.icons import *\nfrom functions.utils import *\nfrom shiny import App, reactive, render, ui\n\nlocale.setlocale(locale.LC_TIME, \"pt_BR.UTF-8\")\n\nurl_tse = \"https://resultados.tse.jus.br\"\nenv_tse = \"oficial\"\nele_tse = \"619\"\n\nrefresh_time = 90  # seconds\n\nlist_municipios = get_config_municipios(\n    ano=\"2024\", base_url=url_tse, cod_eleicao=ele_tse, env=env_tse\n)\n\nlist_states = group_states_by_region(copy.deepcopy(list_municipios))\n\n\napp_ui = ui.page_fluid(\n    ui.include_css(Path(__file__).parent / \"styles.css\"),\n    ui.row(\n        ui.column(\n            3,\n            #   ui.h3(\"AMBIENTE SIMULADO DO TSE\")\n        ),\n        ui.column(6, ui.h1(\"Apura\u00e7\u00e3o Elei\u00e7\u00f5es 2024\")),\n        # ui.column(3, ui.output_text(\"next_update_in\")),\n        style=\"margin-top:1rem;\",\n    ),\n    ui.hr(),\n    ui.row(\n        ui.column(\n            3,\n            ui.input_selectize(\n                \"select_state\",\n                \"Selecione o Estado: \",\n                choices=list_states,\n                selected=\"sp\",\n                multiple=False,\n            ),\n            ui.input_selectize(\n                \"select_municipality\",\n                \"Selecione o Municipio: \",\n                choices=get_municipality_by_state(list_municipios, \"sp\"),\n                multiple=False,\n            ),\n            ui.output_ui(\"side_cards_kpi\"),\n        ),\n        ui.column(\n            9,\n            ui.row(\n                ui.column(\n                    9,\n                    ui.output_ui(\"perc_secoes_card\"),\n                ),\n                ui.column(3, ui.output_ui(\"md_card\")),\n            ),\n            ui.row(\n                ui.column(\n                    6,\n                    ui.h3(\"Prefeito\"),\n                    ui.output_ui(\"prefeito_ui\"),\n                    class_=\"col-sm-6 column-prefeito\",\n                ),\n                ui.column(\n                    6,\n                    ui.h3(\"Vereador\"),\n                    ui.output_ui(\"vereador_ui\"),\n                    class_=\"col-sm-6 column-vereador\",\n                ),\n                style=\"height: 70vh;\",\n            ),\n        ),\n    ),\n    ui.output_ui(\"footer_update\"),\n)\n\n\ndef server(input, output, session):\n\n    # app starter\n    data_prefeito = reactive.value(\n        get_municipios_data(\n            ano=\"2024\",\n            cod_cargo=\"0011\",\n            cod_eleicao=ele_tse,\n            cod_mun_tse=\"85995\",\n            env=env_tse,\n            base_url=url_tse,\n            state=\"rs\",\n        )\n    )\n    data_vereador = reactive.value(\n        get_municipios_data(\n            ano=\"2024\",\n            cod_cargo=\"0013\",\n            cod_eleicao=ele_tse,\n            cod_mun_tse=\"85995\",\n            env=env_tse,\n            base_url=url_tse,\n            state=\"rs\",\n        )\n    )\n\n    @reactive.effect\n    @reactive.event(input.select_state)\n    def _():\n        selected_state = input.select_state()\n\n        if selected_state != \"\":\n            ui.update_selectize(\n                \"select_municipality\",\n                choices=get_municipality_by_state(list_municipios, selected_state),\n            )\n\n    # @render.text\n    # def next_update_in():\n\n    #     reactive.invalidate_later(1)\n\n    #     minutes, seconds = calculate_time_difference(\n    #         data_prefeito()[\"timestamp\"], refresh_time=refresh_time\n    #     )\n\n    #     return f\"Pr\u00f3xima atualiza\u00e7\u00e3o: {minutes}m e {seconds}s\"\n\n    @render.ui\n    def side_cards_kpi():\n        return [\n            ui.layout_column_wrap(\n                ui.value_box(\n                    \"N\u00famero de Eleitores\",\n                    f\"{int(data_prefeito()['e']['te']):,}\",\n                    theme=\"bg-gradient-purple-teal\",\n                    full_screen=False,\n                ),\n                ui.value_box(\n                    \"Absten\u00e7\u00f5es\",\n                    f\"{data_prefeito()['e']['pa']}% ({int(data_prefeito()['e']['a']):,} eleitores)\",\n                    theme=\"bg-gradient-purple-teal\",\n                    full_screen=False,\n                ),\n            ),\n            ui.layout_column_wrap(\n                ui.value_box(\n                    \"N\u00famero de Votos V\u00e1lidos\",\n                    f\"{int(data_prefeito()['v']['vv']):,}\",\n                    theme=\"bg-gradient-purple-teal\",\n                    full_screen=False,\n                )\n            ),\n            ui.layout_column_wrap(\n                ui.value_box(\n                    \"Votos Nulos\",\n                    f\"{data_prefeito()['v']['ptvn']}% ({int(data_prefeito()['v']['vn']):,} eleitores)\",\n                    theme=\"bg-gradient-purple-teal\",\n                    full_screen=False,\n                ),\n                ui.value_box(\n                    \"Votos Brancos\",\n                    f\"{data_prefeito()['v']['pvb']}% ({int(data_prefeito()['v']['vb']):,} eleitores)\",\n                    theme=\"bg-gradient-purple-teal\",\n                    full_screen=False,\n                ),\n            ),\n        ]\n\n    @render.ui\n    def perc_secoes_card():\n\n        selected_state = input.select_state()\n        selected_mun = input.select_municipality()\n\n        try:\n            name_mun = (\n                get_municipality_by_state(list_municipios, selected_state)[selected_mun]\n                + \" - \"\n                + selected_state.upper()\n            )\n        except:\n            name_mun = \"\"\n\n        return ui.HTML(\n            card_secoes(\n                f\"Percentual de se\u00e7\u00f5es totalizadas: {name_mun}\",\n                float(data_prefeito()[\"s\"][\"pst\"].replace(\",\", \".\")),\n            )\n        )\n\n    @render.ui\n    def md_card():\n        return ui.HTML(card_md(data_prefeito().get(\"md\", \"n\")))\n\n    @render.ui\n    def prefeito_ui():\n        mun = input.select_municipality()\n        st = input.select_state()\n        region = find_region(st, list_states)\n        sort_prefeito = sorted(data_prefeito()[\"cand\"], key=lambda x: int(x[\"seq\"]))\n        return [\n            ui.HTML(\n                card_candidato(\n                    url_candcontas=f\"https://divulgacandcontas.tse.jus.br/divulga/#/candidato/{region}/{st.upper()}/2045202024/{cand['sqcand']}/2024/{mun}\",\n                    img_candidato=f\"{url_tse}/{env_tse}/ele2024/{ele_tse}/fotos/{st}/{cand['sqcand']}.jpeg\",\n                    name_candidato=cand[\"n\"] + \" - \" + cand[\"nm\"],\n                    progress=float(cand[\"pvap\"].replace(\",\", \".\")),\n                    votos=int(cand[\"vap\"]),\n                    status=cand[\"st\"],\n                )\n            )\n            for cand in sort_prefeito\n        ]\n\n    @render.ui\n    def vereador_ui():\n        mun = input.select_municipality()\n        st = input.select_state()\n        region = find_region(st, list_states)\n        sort_vereador = sorted(data_vereador()[\"cand\"], key=lambda x: int(x[\"seq\"]))\n        sort_vereador_leg = [\n            {\n                **cand,\n                \"url_candcontas\": (\n                    f\"https://divulgacandcontas.tse.jus.br/divulga/#/candidato/{region}/{st.upper()}/2045202024/{cand['sqcand']}/2024/{mun}\"\n                    if cand[\"sqcand\"]\n                    else \"\"\n                ),\n                \"img_candidato\": (\n                    f\"{url_tse}/{env_tse}/ele2024/{ele_tse}/fotos/{st}/{cand['sqcand']}.jpeg\"\n                    if cand[\"sqcand\"]\n                    else \"https://via.placeholder.com/60x60?text=Sem+Imagem\"\n                ),\n            }\n            for cand in sort_vereador\n        ]\n\n        return [\n            ui.HTML(\n                card_candidato(\n                    url_candcontas=cand.get(\"url_candcontas\"),\n                    img_candidato=cand.get(\"img_candidato\"),\n                    name_candidato=cand[\"n\"] + \" - \" + cand[\"nm\"],\n                    progress=float(cand[\"pvap\"].replace(\",\", \".\")),\n                    votos=int(cand[\"vap\"]),\n                    status=cand[\"st\"],\n                )\n            )\n            for cand in sort_vereador_leg\n        ]\n\n    @render.ui\n    def footer_update():\n\n        reactive.invalidate_later(refresh_time)\n        data_prefeito.set(\n            get_municipios_data(\n                ano=\"2024\",\n                cod_cargo=\"0011\",\n                cod_eleicao=ele_tse,\n                cod_mun_tse=input.select_municipality(),\n                env=env_tse,\n                base_url=url_tse,\n                state=input.select_state(),\n            )\n        )\n\n        data_vereador.set(\n            get_municipios_data(\n                ano=\"2024\",\n                cod_cargo=\"0013\",\n                cod_eleicao=ele_tse,\n                cod_mun_tse=input.select_municipality(),\n                env=env_tse,\n                base_url=url_tse,\n                state=input.select_state(),\n            )\n        )\n\n        datetime_readable = datetime.fromisoformat(\n            data_prefeito()[\"timestamp\"]\n        ).strftime(\"%d de %B de %Y \u00e0s %H:%M:%S\")\n\n        return ui.HTML(\n            f\"\"\"\n            <footer> \u00daltima atualiza\u00e7\u00e3o: {datetime_readable}\n            \"\"\"\n        )\n\n\napp = App(app_ui, server)\n", "type": "text"}, {"name": "requirements.txt", "content": "requests==2.32.3", "type": "text"}, {"name": "styles.css", "content": "\n@import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');\n\nbody {\n    background-color: rgba(227,218, 216, 0.8);\n    font-family: 'Montserrat';\n}\n\n.bslib-value-box .value-box-value {\n    font-size: 1.2rem;\n}\n\nh1, .h1 {\n    text-align:center;\n    padding-top: 2%;\n}\n\n#next_update_in {\n    padding-top: 10%;\n}\n\n/* Prefeito column */\n\n.column-prefeito {\n    border: 1px solid #ccc;\n    height: 100%;\n    max-height: 95%;\n    overflow: auto;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n/* Vereador column */\n\n.column-vereador {\n    border: 1px solid #ccc;\n    height: 100%;\n    max-height: 95%;\n    overflow: auto;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n/* Card Candidato CSS */\n.card-candidato {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 10px;\n    margin: 10px;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    width: 80%;\n    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n    background-color: #fff;\n    position: relative;\n}\n\n.card-candidato img {\n    width: 60px;\n    height: 60px;\n    border-radius: 50%;\n    margin-right: 5px;\n    object-fit: cover;\n}\n\n.card-candidato-content {\n    display: flex;\n    flex-direction: column;\n    width: 80%;\n}\n\n.card-candidato-content h3 {\n    margin: 0;\n    font-size: 1.2em;\n    white-space: nowrap;      /* Prevents the text from wrapping to the next line */\n    overflow: hidden;         /* Ensures the overflowed text is hidden */\n    text-overflow: ellipsis;  /* Adds '...' at the end of the overflowing text */\n    max-width: 70%;          /* Set a max width so the ellipsis appears when the name is too long */\n}\n\n.progress-bar-container {\n    background-color: #e0e0e0;\n    border-radius: 8px;\n    overflow: hidden;\n    margin-top: 8px;\n    position: relative;\n    height: 20px;\n}\n\n.progress-bar {\n    height: 100%;\n    background-color: rgba(136, 136, 196, 1);\n    width: 0%;\n}\n\n.progress-value {\n    position: absolute;\n    top: 0;\n    right: 10px;\n    color: #000;\n    line-height: 20px;\n}\n\n.status-label {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    padding: 4px 8px;\n    border-radius: 5px;\n    font-size: 12px;\n    color: white;\n}\n\n.status-label.eleito {\n    background-color: green;\n}\n\n.status-label.segundo-turno {\n    background-color: orange;\n}\n\n.status-label.n\u00e3o-eleito {\n    background-color: red;\n}\n\n.status-label.eleito-por-qp {\n    background-color: blue;\n}\n\n.status-label.eleito-por-m\u00e9dia {\n    background-color: orange;\n}\n\n.status-label.suplente {\n    background-color: purple;\n}\n\n/* Card secoes */\n\n.card-secoes {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 10px;\n    margin: 0 auto;\n    margin-bottom: 10px;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    width: 90%;\n    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n    background-color: #fff;\n    position: relative;\n}\n\n.card-secoes-content {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n}\n\n.card-secoes-content h3 {\n    margin: 0;\n    font-size: 1.2em;\n    text-align: center;\n}\n\n.progress-bar-container-secoes {\n    background-color: #e0e0e0;\n    border-radius: 8px;\n    overflow: hidden;\n    margin-top: 8px;\n    position: relative;\n    height: 20px;\n}\n\n.progress-bar-secoes {\n    height: 100%;\n    background-color: rgba(135, 196, 158, 1);\n    width: 0%;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n    line-height: 20px;\n}\n\nfooter {\n    text-align: center;\n    padding: 10px;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n}", "type": "text"}, {"name": "functions/icons.py", "content": "from shiny import ui\n\nshare_icon = ui.HTML(\n    \"\"\"\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-share-fill\" viewBox=\"0 0 16 16\">\n    <path d=\"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5\"/>\n    </svg>\n    \"\"\"\n)\n", "type": "text"}, {"name": "functions/utils.py", "content": "from datetime import datetime\nfrom typing import Dict, List\n\nimport requests\nfrom shiny import ui\n\nempty_dict = {\n    \"s\": {\"pst\": \"0\"},\n    \"e\": {\n        \"te\": 0,\n        \"a\": 0,\n        \"pa\": 0,\n    },\n    \"v\": {\n        \"vv\": 0,\n        \"ptvn\": 0,\n        \"vn\": 0,\n        \"pvb\": 0,\n        \"vb\": 0,\n    },\n    \"cand\": [],\n}\n\nempty_dict_mun = [{\"cd\": \"\", \"ds\": \"\", \"mu\": [{\"cd\": \"\", \"nm\": \"\"}]}]\n\n\ndef calculate_time_difference(input_time, refresh_time):\n    timestamp = datetime.fromisoformat(input_time)\n    now = datetime.now()\n\n    time_difference = now - timestamp\n\n    total_seconds = int(refresh_time - time_difference.total_seconds())\n    minutes = total_seconds // 60\n    seconds = total_seconds % 60\n\n    return minutes, seconds\n\n\ndef get_config_municipios(\n    base_url: str = \"https://resultados.tse.jus.br\",\n    cod_eleicao: str = \"544\",\n    env: str = \"oficial\",\n    ano: str = \"2022\",\n) -> List[Dict]:\n\n    req_url = f\"{base_url}/{env}/ele{ano}/{cod_eleicao}/config/mun-e{cod_eleicao.zfill(6)}-cm.json\"\n\n    try:\n        req_tse = requests.get(req_url)\n        req_tse.raise_for_status()  # Check if the request was successful\n        req_tse_dict = req_tse.json()  # Directly parse JSON response\n    except requests.exceptions.RequestException as e:\n        print(f\"Request failed: {e}\")\n        return empty_dict_mun  # Return empty list on failure\n\n    list_mun = req_tse_dict.get(\"abr\", [])\n    return list_mun\n\n\ndef handle_failure():\n    return {**empty_dict, \"timestamp\": datetime.now().isoformat()}\n\n\ndef create_cand_structure(cand):\n    ret_dict_partido = []\n    for par in cand[\"par\"]:\n        ret_dict = par[\"cand\"]\n        if par.get(\"tvtl\", \"0\") != \"0\":\n            ret_dict.append(\n                {\n                    \"n\": par[\"n\"],\n                    \"nm\": par[\"sg\"] + \" - VOTO EM LEGENDA\",\n                    \"vap\": par[\"tvtl\"],\n                    \"pvap\": \"0\",\n                    \"st\": \"\",\n                    \"sqcand\": \"\",\n                    \"seq\": \"99999\",\n                }\n            )\n        ret_dict_partido += [\n            {**cand_dict, \"nm_partido\": par[\"nm\"]} for cand_dict in ret_dict\n        ]\n    return ret_dict_partido\n\n\ndef remove_municipality_from_states(list_mun):\n    for state_dict in list_mun:\n        if \"mu\" in state_dict:\n            del state_dict[\"mu\"]\n    return list_mun\n\n\ndef group_states_by_region(list_mun_og):\n\n    list_mun = remove_municipality_from_states(list_mun_og)\n\n    regions = {\n        \"Norte\": [],\n        \"Nordeste\": [],\n        \"Centro-Oeste\": [],\n        \"Sudeste\": [],\n        \"Sul\": [],\n    }\n    state_to_region = {\n        \"AC\": \"Norte\",\n        \"AL\": \"Nordeste\",\n        \"AM\": \"Norte\",\n        \"AP\": \"Norte\",\n        \"BA\": \"Nordeste\",\n        \"CE\": \"Nordeste\",\n        \"DF\": \"Centro-Oeste\",\n        \"ES\": \"Sudeste\",\n        \"GO\": \"Centro-Oeste\",\n        \"MA\": \"Nordeste\",\n        \"MT\": \"Centro-Oeste\",\n        \"MS\": \"Centro-Oeste\",\n        \"MG\": \"Sudeste\",\n        \"PA\": \"Norte\",\n        \"PB\": \"Nordeste\",\n        \"PR\": \"Sul\",\n        \"PE\": \"Nordeste\",\n        \"PI\": \"Nordeste\",\n        \"RJ\": \"Sudeste\",\n        \"RN\": \"Nordeste\",\n        \"RO\": \"Norte\",\n        \"RS\": \"Sul\",\n        \"RR\": \"Norte\",\n        \"SC\": \"Sul\",\n        \"SE\": \"Nordeste\",\n        \"SP\": \"Sudeste\",\n        \"TO\": \"Norte\",\n    }\n\n    for state_dict in list_mun:\n        state_code = state_dict.get(\"cd\")  # Assuming 'cd' is the state code\n        region = state_to_region.get(state_code.upper(), \"Unknown\")\n\n        # Only add to the region if it's recognized\n        if region != \"Unknown\":\n            regions[region].append(state_dict)\n\n    transformed_dict = {}\n\n    for region, states in regions.items():\n        # Initialize an empty dictionary for the region\n        transformed_dict[region] = {}\n\n        # Loop through the states and build the desired key-value pairs\n        for state in states:\n            state_code = state[\"cd\"].lower()  # Convert state code to lowercase\n            state_name = state[\"ds\"]\n            transformed_dict[region][\n                state_code\n            ] = f\"{state_code.upper()}-{state_name.upper()}\"\n\n    return transformed_dict\n\n\ndef get_municipality_by_state(list_mun, selected_state: str):\n\n    state = next(\n        (x for x in list_mun if x.get(\"cd\").upper() == selected_state.upper()), {}\n    )\n\n    if not state:\n        ret_dict = {}\n    else:\n        ret_dict = {}\n\n        for city in state[\"mu\"]:\n            ret_dict[city[\"cd\"]] = city[\"nm\"].replace(\"&apos;\", \"'\")\n\n    return ret_dict\n\n\ndef find_region(state_abbreviation: str, regions_dict: dict) -> str:\n    for region, states in regions_dict.items():\n        if state_abbreviation in states:\n            return region.replace(\"-\", \"\").upper()\n    return \"State abbreviation not found.\"\n\n\ndef get_municipios_data(\n    cod_eleicao: str,\n    cod_mun_tse: str,\n    cod_cargo: str,\n    state: str,\n    base_url: str = \"https://resultados.tse.jus.br\",\n    env: str = \"oficial\",\n    ano: str = \"2024\",\n) -> Dict:\n    state = state.lower()\n    if state == \"\" or cod_mun_tse == \"\":\n        print(\"empty inputs, returning empty JSON\")\n        return handle_failure()\n\n    req_url = f\"{base_url}/{env}/ele{ano}/{cod_eleicao}/dados/{state}/{state}{cod_mun_tse}-c{cod_cargo}-e{cod_eleicao.zfill(6)}-u.json\"\n\n    try:\n        req_tse = requests.get(req_url)\n        req_tse.raise_for_status()\n        req_tse_dict = req_tse.json()\n    except requests.exceptions.RequestException as e:\n        print(f\"Request failed: {e}\")\n        return handle_failure()\n\n    if req_tse_dict:\n        list_cand_partidos = [\n            create_cand_structure(candidate)\n            for candidate in req_tse_dict[\"carg\"][0][\"agr\"]\n        ]\n        req_tse_dict[\"cand\"] = [\n            item for sublist in list_cand_partidos for item in sublist\n        ]\n        req_tse_dict[\"timestamp\"] = datetime.now().isoformat()\n        del req_tse_dict[\"carg\"]\n    else:\n        return handle_failure()\n\n    return req_tse_dict\n\n\ndef card_candidato(\n    url_candcontas: str,\n    img_candidato: str,\n    name_candidato: str,\n    progress: float,\n    votos: int,\n    status: str,\n):\n    if url_candcontas != \"\":\n        html_string = f\"\"\"\n        <div class=\"card-candidato\">\n            <a href=\"{url_candcontas}\" target=\"_blank\">\n                <img src=\"{img_candidato}\" alt=\"Candidate Image\">\n           </a>\n            <div class=\"card-candidato-content\">\n                <h3>{name_candidato} \n                    <span class=\"status-label {status.lower().replace(' ', '-').replace('2\u00ba', 'segundo')}\">\n                        {status}\n                    </span>\n                </h3>\n                <div class=\"progress-bar-container\">\n                    <div class=\"progress-bar\" style=\"width:{progress}%;\"></div>\n                    <span class=\"progress-value\">{votos:,} votos - {progress}%</span>\n                </div>\n            </div>\n        </div>\n        \"\"\"\n    else:\n        html_string = f\"\"\"\n        <div class=\"card-candidato\">\n                <img src=\"{img_candidato}\" alt=\"Candidate Image\">\n            <div class=\"card-candidato-content\">\n                <h3>{name_candidato} \n                    <span class=\"status-label {status.lower().replace(' ', '-').replace('2\u00ba', 'segundo')}\">\n                        {status}\n                    </span>\n                </h3>\n                <div class=\"progress-bar-container\">\n                    <div class=\"progress-bar\" style=\"width:{progress}%;\"></div>\n                    <span class=\"progress-value\">{votos:,} votos - {progress}%</span>\n                </div>\n            </div>\n        </div>\n        \"\"\"\n    return html_string\n\n\ndef card_secoes(title: str, progress: float):\n\n    html_string = f\"\"\"\n        <div class=\"card-secoes\">\n        <div class=\"card-secoes-content\">\n            <h3>{title}</h3>\n            <div class=\"progress-bar-container-secoes\">\n                <div class=\"progress-bar-secoes\" style=\"width:{progress}%;\">{progress}%</div>\n            </div>\n        </div>\n        </div>\n    \"\"\"\n    return html_string\n\n\ndef card_md(status: str):\n    icons = {\"e\": \"\ud83d\udfe2\", \"s\": \"\ud83d\udfe1\", \"n\": \"\ud83d\udd34\"}\n    status_str = {\"e\": \"Definido\", \"s\": \"2\u00ba Turno\", \"n\": \"N\u00e3o Definido\"}\n\n    icon = icons.get(status, icons[\"n\"])\n\n    html_string = f\"\"\"\n        <div class=\"card-secoes\">\n            <div class=\"card-secoes-content\">\n                <div class=\"status-container\">\n                    Matematicamente Definido: <span class=\"status-icon\">{icon}</span>\n                    <br>\n                    <div style=\"display:block; text-align:center;\"\">{status_str.get(status, status_str[\"n\"])}</div>\n                </div>\n            </div>\n        </div>\n    \"\"\"\n    return html_string\n", "type": "text"}]